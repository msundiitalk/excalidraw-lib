"use strict";(self.webpackChunkExcalidraw=self.webpackChunkExcalidraw||[]).push([[499],{9242:(r,e,t)=>{t.r(e),t.d(e,{getTEXtChunk:()=>d,encodePngMetadata:()=>y,decodePngMetadata:()=>w,encodeSvgMetadata:()=>h,decodeSvgMetadata:()=>v});var n=t(8950),a=t(2983),o=t.n(a),c=t(1194),i=t(3434),u=t.n(i),l=t(6432),s=t(8288),p=function(r,e){var t,n,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=e.call(r,c)}catch(r){o=[6,r],n=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},f=function(r){return"arrayBuffer"in r?r.arrayBuffer():new Promise((function(e,t){var n=new FileReader;n.onload=function(r){var n;if(null===(n=r.target)||void 0===n||!n.result)return t(new Error("couldn't convert blob to ArrayBuffer"));e(r.target.result)},n.readAsArrayBuffer(r)}))},d=function(){var r=(0,n.Z)((function(r){var e,t,n,a;return p(this,(function(i){switch(i.label){case 0:return t=o(),n=Uint8Array.bind,[4,f(r)];case 1:return e=t.apply(void 0,[new(n.apply(Uint8Array,[void 0,i.sent()]))]),(a=e.find((function(r){return"tEXt"===r.name})))?[2,c.decode(a.data)]:[2,null]}}))}));return function(e){return r.apply(this,arguments)}}(),y=function(){var r=(0,n.Z)((function(r){var e,t,n,a,i,d,y,w,h,v,b;return p(this,(function(p){switch(p.label){case 0:return e=r.blob,t=r.metadata,a=o(),i=Uint8Array.bind,[4,f(e)];case 1:return n=a.apply(void 0,[new(i.apply(Uint8Array,[void 0,p.sent()]))]),w=(y=c).encode,h=[s.LO.excalidraw],b=(v=JSON).stringify,[4,(0,l.cv)({text:t,compress:!0})];case 2:return d=w.apply(y,h.concat([b.apply(v,[p.sent()])])),n.splice(-1,0,d),[2,new Blob([u()(n)],{type:s.LO.png})]}}))}));return function(e){return r.apply(this,arguments)}}(),w=function(){var r=(0,n.Z)((function(r){var e,t,n;return p(this,(function(a){switch(a.label){case 0:return[4,d(r)];case 1:if((null==(e=a.sent())?void 0:e.keyword)!==s.LO.excalidraw)return[3,5];a.label=2;case 2:if(a.trys.push([2,4,,5]),!("encoded"in(t=JSON.parse(e.text)))){if("type"in t&&t.type===s.r8.excalidraw)return[2,e.text];throw new Error("FAILED")}return[4,(0,l.Jx)(t)];case 3:return[2,a.sent()];case 4:throw n=a.sent(),console.error(n),new Error("FAILED");case 5:throw new Error("INVALID")}}))}));return function(e){return r.apply(this,arguments)}}(),h=function(){var r=(0,n.Z)((function(r){var e,t,n,a,o,c;return p(this,(function(i){switch(i.label){case 0:return e=r.text,n=l.Ne,o=(a=JSON).stringify,[4,(0,l.cv)({text:e})];case 1:return[4,n.apply(void 0,[o.apply(a,[i.sent()]),!0])];case 2:return t=i.sent(),c="",c+="\x3c!-- payload-type:".concat(s.LO.excalidraw," --\x3e"),c+="\x3c!-- payload-version:2 --\x3e",c+="\x3c!-- payload-start --\x3e",c+=t,[2,c+="\x3c!-- payload-end --\x3e"]}}))}));return function(e){return r.apply(this,arguments)}}(),v=function(){var r=(0,n.Z)((function(r){var e,t,n,a,o,c,i,u;return p(this,(function(p){switch(p.label){case 0:if(!(e=r.svg).includes("payload-type:".concat(s.LO.excalidraw)))return[3,5];if(!(t=e.match(/<!-- payload-start -->(.+?)<!-- payload-end -->/)))throw new Error("INVALID");n=e.match(/<!-- payload-version:(\d+) -->/),a=(null==n?void 0:n[1])||"1",o="1"!==a,p.label=1;case 1:return p.trys.push([1,4,,5]),[4,(0,l.Vy)(t[1],o)];case 2:if(c=p.sent(),!("encoded"in(i=JSON.parse(c)))){if("type"in i&&i.type===s.r8.excalidraw)return[2,c];throw new Error("FAILED")}return[4,(0,l.Jx)(i)];case 3:return[2,p.sent()];case 4:throw u=p.sent(),console.error(u),new Error("FAILED");case 5:throw new Error("INVALID")}}))}));return function(e){return r.apply(this,arguments)}}()}}]);